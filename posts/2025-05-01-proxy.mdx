---
title: 'x-uié¢æ¿éƒ¨ç½²ä»£ç†+å¥—CF'
date: '2025-05-01T04:38:25.957Z'
tags:
  - proxy
---
> é¡¹ç›®é“¾æ¥
>
> è®¿é—® https://github.com/vaxilu/x-ui

---
### 1. å‡†å¤‡å·¥ä½œ
ç¡®å®šé˜²ç«å¢™æ˜¯å¦å…³é—­ï¼Œæˆ–è€…æ‰‹åŠ¨å¼€æ”¾ç«¯å£ï¼Œèƒ½ä¸èƒ½ç™»å½•é¢æ¿ æ›´æ–°ç³»ç»Ÿä¾èµ–

```jsx
Ubuntuï¼šapt update -yÂ centos ï¼šyum update -y
```

### 2. å®‰è£… æ‰§è¡Œå‘½ä»¤è¿è¡Œè„šæœ¬
```jsx
bash <(curl -Ls https://raw.githubusercontent.com/vaxilu/x-ui/master/install.sh)
```

å®‰è£…/æ›´æ–°å®Œæˆåéœ€è¦å¼ºåˆ¶ä¿®æ”¹ç«¯å£ä¸è´¦æˆ·å¯†ç â€”â€”è¾“å…¥`y`æŒ‰ç…§æç¤ºè¾“å‡ºä¿¡æ¯

å®Œæˆåè¿›å…¥ç½‘å€`ä¸»æœºIP:ä½ è¾“å…¥çš„ç«¯å£å·`ï¼Œè¾“å…¥è´¦å·å¯†ç 

è¿›å…¥ä¸»é¡µé¢ï¼Œé€‰æ‹©é¢æ¿è®¾ç½®ï¼Œæ›´æ”¹é¢æ¿urlæ ¹è·¯å¾„ï¼Œæ›´æ”¹åé‡å¯ï¼Œå†æ¬¡è¿›å…¥æ—¶ä½¿ç”¨åœ°å€`ä¸»æœºIP:ä½ è¾“å…¥çš„ç«¯å£å·/æ›´æ”¹çš„æ ¹è·¯å¾„`ï¼Œå…¶ä»–æ ¹æ®è‡ªèº«æ›´æ”¹

### 3. SSLè¯ä¹¦ç”³è¯·

è¾“å…¥`x-ui`è¿›å…¥é¢æ¿ç®¡ç†ï¼Œé€‰æ‹©16å›è½¦

```jsx
******ä½¿ç”¨è¯´æ˜******
è¯¥è„šæœ¬å°†ä½¿ç”¨Acmeè„šæœ¬ç”³è¯·è¯ä¹¦,ä½¿ç”¨æ—¶éœ€ä¿è¯:
1.çŸ¥æ™“Cloudflare æ³¨å†Œé‚®ç®±
2.çŸ¥æ™“Cloudflare Global API Key
3.åŸŸåå·²é€šè¿‡Cloudflareè¿›è¡Œè§£æåˆ°å½“å‰æœåŠ¡å™¨
4.è¯¥è„šæœ¬ç”³è¯·è¯ä¹¦é»˜è®¤å®‰è£…è·¯å¾„ä¸º/root/certç›®å½•
```

å‡†å¤‡å¥½è¿™äº›ä¸œè¥¿ï¼Œcloudflareç›´æ¥é‚®ç®±æ³¨å†Œhttps://cloudflare.com/ï¼ŒAPIÂ KEY

![proxy-img](/images/2025-05-01-proxy/01.png)

ä¹‹åä¾æ¬¡è¾“å…¥

![proxy-img](/images/2025-05-01-proxy/02.png)

æ³¨æ„è¾“å…¥çš„åŸŸåä¸ºä½ è§£æåˆ°CFä¸Šçš„åŸŸåï¼Œä¸æ˜¯Aè®°å½•çš„åŸŸåï¼Œå¦‚ä¸‹å›¾1çš„ä½ç½®

![proxy-img](/images/2025-05-01-proxy/03.png)

ä¹‹åè¿›å…¥é¢æ¿è®¾ç½®

![proxy-img](/images/2025-05-01-proxy/04.png)

å°†/root/cert/xxxå¡«å…¥æ¡†ä¸­ï¼Œä¸Šé¢æ˜¯cerï¼Œä¸‹é¢æ˜¯keyï¼Œä¹‹åè¿›å…¥cloudflareï¼Œæ”¹æˆè¿™æ ·ï¼Œæ‰“å¼€ä¸Šé¢å›¾2æ ‡è®°çš„å°äº‘æœµï¼Œè¿™æ ·æµé‡å°±è¢«cfä»£ç†äº†

![proxy-img](/images/2025-05-01-proxy/05.png)

### 4. åˆ›å»ºä»£ç†

æ¥ä¸Šé¢æ ‡è®°çš„é‚£å¼ å›¾ï¼Œå°†ä½ çš„ä¸»æœºIPè§£æåˆ°è¿™ä¸ªåŸŸåçš„Aè®°å½•ä¸‹ï¼Œåç§°éšæ„å¡«å†™ï¼Œç›¸å½“äºå¾—åˆ°äº†ä¸€ä¸ªä¸‰çº§åŸŸåâ€”â€”`åç§°.åŸŸå`ï¼Œä¾‹å¦‚`test.example.com`

è¿›å…¥x-ui é¢æ¿å…¥ç«™åˆ—è¡¨-æ·»åŠ å…¥ç«™

![proxy-img](/images/2025-05-01-proxy/06.png)

![proxy-img](/images/2025-05-01-proxy/07.png)

è¿™é‡Œçš„åŸŸåå°±æ˜¯ä½ è‡ªå·±è§£æåˆ°çš„åŸŸåï¼Œåç§°+åŸŸåï¼Œæ·»åŠ ï¼Œåˆ†äº«äºŒç»´ç å°±å¯ä»¥ä½¿ç”¨äº†

### 5. å¥—CFä¼˜é€‰IP
[badafans/better-cloudflare-ip: æŸ¥æ‰¾é€‚åˆè‡ªå·±å½“å‰ç½‘ç»œç¯å¢ƒçš„ä¼˜é€‰cloudflare anycast IP (github.com)](https://github.com/badafans/better-cloudflare-ip)

[XIU2/CloudflareSpeedTest: ğŸŒ©ã€Œè‡ªé€‰ä¼˜é€‰ IPã€æµ‹è¯• Cloudflare CDN å»¶è¿Ÿå’Œé€Ÿåº¦ï¼Œè·å–æœ€å¿« IP ï¼å½“ç„¶ä¹Ÿæ”¯æŒå…¶ä»– CDN / ç½‘ç«™ IP ~ (github.com)](https://github.com/XIU2/CloudflareSpeedTest)

ä¸¤æ¬¾å·¥å…·

![proxy-img](/images/2025-05-01-proxy/08.png)

å°†ä¼˜é€‰å¾—åˆ°çš„åœ°å€å¡«å†™ä¸Šå»ï¼Œå°†åŸæ¥çš„åœ°å€å†™åˆ°ä¼ªè£…åŸŸåï¼Œéœ€è¦ä¼˜é€‰443è¿™ä¸ªç«¯å£çš„åœ°å€

### 6.å…¶ä»–ç±»å‹çš„ä»£ç†

ä¸Šé¢ä¹Ÿå¯ä»¥ä¸ç”¨443ç«¯å£ï¼Œè¿™è¦æ·»åŠ ä¸€æ¡è§„åˆ™

![proxy-img](/images/2025-05-01-proxy/09.png)

ç„¶åå°±å¯ä»¥ä¼˜é€‰443çš„åœ°å€ï¼Œç«¯å£æ”¹å†™443

ä¹Ÿèƒ½ç›´æ¥ä½¿ç”¨å…¶ä»–çš„ç«¯å£ï¼Œä¸‹é¢å°±ä¸éœ€è¦æ‰“å¼€tls

ä¹Ÿå¯ä»¥ç½‘ç»œç›´æ¥é€‰æ‹©tcpï¼Œé€‰æ‹©realityï¼Œè¿™ç§æ˜¯ç›´è¿ï¼Œè¦çœ‹ä½ çš„æœåŠ¡å™¨ç½‘ç»œè´¨é‡
